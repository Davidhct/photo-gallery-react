(this["webpackJsonpphoto-gallery-react"]=this["webpackJsonpphoto-gallery-react"]||[]).push([[0],[,,,,,,,function(e,t,a){},,,,,,,,,,function(e,t,a){},,,function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),c=a(9),i=a.n(c),r=(a(17),a(12)),s=a(2),l=a(3),d=a(5),h=a(4),g=a(10),p=(a(20),a(0)),u=function(e){return Object(p.jsx)("div",{children:Object(p.jsx)("input",{type:"search",className:"search",placeholder:"Search images",onChange:e.handleChange})})},A=(a(22),function(e){return Object(p.jsx)("div",{className:"item-list ".concat(e.className),children:e.photos})}),f=a.p+"static/media/rotate_icon.1b44ac46.png",j="data:image/png;base64,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",x="data:image/png;base64,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",m=a.p+"static/media/drag_icon.bc37ff04.png",b=(a(7),function(e){return Object(p.jsxs)("div",{className:"item",children:[Object(p.jsx)("img",{id:e.id,index:e.index,src:"".concat(e.photo.largeImageURL),alt:"img",className:"image",style:e.rotateStyle}),Object(p.jsxs)("div",{className:"image-footer",children:[Object(p.jsx)("img",{id:e.id,src:j,alt:"delete icon",className:"delete-icon",onClick:e.handleDeleteClick}),Object(p.jsx)("img",{id:e.id,src:x,alt:"expand icon",className:"expand-icon",onClick:e.handleExpandClick}),Object(p.jsx)("img",{id:e.id,src:f,alt:"rotate icon",className:"rotate-icon",onClick:e.handleRotateClick}),Object(p.jsx)("img",{id:e.id,src:m,alt:"draggable icon",className:"drag-icon",onClick:e.handleDraggableClick})]})]})}),v=(a(23),function(e){return Object(p.jsxs)("div",{className:"wrapper",onClick:e.handleExpandClick,children:[Object(p.jsx)("img",{id:e.id,src:"".concat(e.photo.largeImageURL),alt:"img",className:"modal",style:e.rotateStyle}),Object(p.jsx)("div",{className:"footer",children:Object(p.jsx)("button",{type:"button",className:"close-btn",onClick:e.handleExpandClick,children:"Close"})})]})}),C=(a(24),function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).handleOnDrag=function(t,a){e.setState({draggedImg:t,dragIndex:a});var n=e.props.photos;e.props.updateStartPhoto(t),n.splice(a,1)},e.handleOnDrop=function(t){var a=e.props.photos,n=e.props.startPhoto;a.splice(t,0,n);var o=!e.props.draggable;e.props.updateChanges(a,o)},e.handleOnDragOver=function(e){e.preventDefault()},e.onTouchStart=function(t,a){t.cancelable&&t.preventDefault();var n=t.target.offsetParent.getBoundingClientRect().width,o=t.target.offsetParent.getBoundingClientRect().height,c=t.target.offsetParent.getBoundingClientRect().x+n,i=t.target.offsetParent.getBoundingClientRect().y+o,r=t.target.offsetParent.getBoundingClientRect().x-n,s=t.target.offsetParent.getBoundingClientRect().y-o;e.setState((function(){return{dragIndex:a,dragPos:{x:[c,r],y:[i,s]},imgWidth:n,imgHeight:o,itemsBorder:window.innerWidth}}))},e.onTouchMove=function(t){t.cancelable&&t.preventDefault();var a=e.state.imgWidth,n=e.state.imgHeight,o=a/2,c=n/2,i=t.target.offsetParent;if(t.target.offsetParent.style.position="fixed",e.state.itemsBorder-o/2>=t.changedTouches[0].clientX&&t.changedTouches[0].clientX-o>=-10){var r=t.changedTouches[0].clientX-o,s=t.changedTouches[0].clientY-c;e.setState((function(e){var t=e.dragPos.x[0],i=e.dragPos.y[0],l=e.dragPos.x[1],d=e.dragPos.y[1],h=e.dragIndex,g=Math.floor(window.innerWidth/a);return r>=t&&(h+=1,l=r-o,t+=a),s>=i&&(h+=g,d=s-c,i+=n),r<=l&&h>=0&&(h-=1,l-=a),s<=d&&h>=0&&(h-=g,d-=n),{dragIndex:h,dragPos:{x:[t,l],y:[i,d]}}})),i.style.left=r+"px",i.style.top=s+"px",i.style.zIndex=15}},e.onTouchEnd=function(t,a,n){t.cancelable&&t.preventDefault();var o=e.state.dragIndex,c=e.props.photos;c.splice(n,1),c.splice(o,0,a);var i=!e.props.draggable;e.props.updateChanges(c,i)},e.state={draggedImg:void 0,dragIndex:void 0,dragPos:{x:[0,0],y:[0,0]},imgWidth:0,imgHeight:0,itemsBorder:[0,0]},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return Object(p.jsxs)("div",{className:"item",children:[Object(p.jsx)("img",{id:this.props.id,src:"".concat(this.props.photo.largeImageURL),alt:"img",className:"image",style:this.props.rotateStyle,onDrag:function(){return e.handleOnDrag(e.props.photo,e.props.index)},onDrop:function(){return e.handleOnDrop(e.props.index)},onDragOver:function(t){return e.handleOnDragOver(t)},onTouchStart:function(t){return e.onTouchStart(t,e.props.index)},onTouchEnd:function(t){return e.onTouchEnd(t,e.props.photo,e.props.index)},onTouchMove:function(t){return e.onTouchMove(t)}}),Object(p.jsxs)("div",{className:"image-footer",children:[Object(p.jsx)("img",{id:this.props.id,src:j,alt:"delete icon",className:"delete-icon",onClick:this.props.handleDeleteClick}),Object(p.jsx)("img",{id:this.props.id,src:x,alt:"expand icon",className:"expand-icon",onClick:this.props.handleExpandClick}),Object(p.jsx)("img",{id:this.props.id,src:f,alt:"rotate icon",className:"rotate-icon",onClick:this.props.handleRotateClick}),Object(p.jsx)("img",{id:this.props.id,src:m,alt:"draggable icon",className:"drag-icon",onClick:this.props.handleDraggableClick})]})]})}}]),a}(n.Component)),O=a(11),D=(a(25),function(){return Object(p.jsx)("div",{className:"wrapper-loader",children:Object(p.jsxs)("div",{className:"lds-ellipsis",children:[Object(p.jsx)("div",{}),Object(p.jsx)("div",{}),Object(p.jsx)("div",{}),Object(p.jsx)("div",{})]})})});a(26);a(27).config();var k=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).handleChange=function(t){var a=t.target.value.trim();e.setState({searchField:a}),""===a?e.setState({photos:[],page:0,more:!1}):(e.setState({searchValue:a,page:1}),fetch("".concat(e.state.apiUrl,"/?key=").concat(e.state.accessKey,"&q=").concat(e.state.searchValue,"&image_type=photo&page=").concat(e.state.page,"&per_page=30")).then((function(e){return e.json()})).then((function(t){return 0===t.hits.length||t.hits.length<20?e.setState({photos:t.hits,more:!1}):e.setState({photos:t.hits,more:!0,page:e.state.page+1})})).catch((function(e){return console.error(e)})))},e.removeDuplicate=function(e){var t=new Map,a=[];e.forEach((function(e,n){!0===t.get(e.id)?a.push(n):t.set(e.id,!0)}));for(var n=0;n<a.length;n++)e.splice(a[n],1);return e},e.fetchImages=function(){var t=e.state.photos;fetch("".concat(e.state.apiUrl,"/?key=").concat(e.state.accessKey,"&q=").concat(e.state.searchValue,"&image_type=photo&page=").concat(e.state.page,"&per_page=30")).then((function(t){return t.ok?t.json():e.setState({more:!1})})).then((function(a){var n;void 0!==a&&((n=t).push.apply(n,Object(r.a)(a.hits)),t=e.removeDuplicate(t),e.setState({photos:t,page:e.state.page+1}))})).catch((function(e){return console.error(e)}))},e.handleRotateClick=function(t){var a=e.state.rotation-90;-360===a&&(a=0);var n=t.id;e.setState({rotation:a,rotId:n})},e.handleExpandClick=function(t){var a=!e.state.showModal,n=t.id;e.setState({showModal:a,modalId:n})},e.handleDeleteClick=function(t){var a=e.state.photos;a.splice(t,1),e.setState({photos:a})},e.toggleDraggable=function(){var t=!e.state.draggable;e.setState({draggable:t})},e.dndUpdateChanges=function(t,a){return e.setState({photos:t,draggable:a})},e.dndUpdateStartPhoto=function(t){return e.setState({startPhoto:t})},e.state={photos:[],page:0,more:!1,searchField:"",searchValue:"",apiUrl:"https://pixabay.com/api",accessKey:"22698874-5e3ff1ef81847d81571af2bbf",rotation:0,showModal:!1,rotId:0,modalId:0,draggable:!1,startPhoto:void 0},e}return Object(l.a)(a,[{key:"debounceEvent",value:function(){var e=this;return this.debouncedEvent=g.debounce.apply(void 0,arguments),function(t){return t.persist(),e.debouncedEvent(t)}}},{key:"componentWillUmaount",value:function(){this.debouncedEvent.cancle()}},{key:"render",value:function(){var e=this,t=this.state.photos.map((function(t,a){var n;return t.id===e.state.rotId&&(n={transform:"rotate(".concat(e.state.rotation,"deg)")}),e.state.draggable?Object(p.jsx)(C,{photos:e.state.photos,id:t.id,index:a,photo:t,draggable:e.state.draggable,rotateStyle:n,updateChanges:e.dndUpdateChanges,startPhoto:e.state.startPhoto,updateStartPhoto:e.dndUpdateStartPhoto,handleExpandClick:function(){return e.handleExpandClick(t)},handleRotateClick:function(){return e.handleRotateClick(t)},handleDeleteClick:function(){return e.handleDeleteClick(a)},handleDraggableClick:function(){return e.toggleDraggable(t)},onDrag:e.handleOnDrag,onDrop:e.handleOnDrop,onDragOver:e.handleOnDragOver,onTouchStart:e.onTouchStart,onTouchEnd:e.onTouchEnd,onTouchMove:e.onTouchMove},t.id):t.id===e.state.modalId&&e.state.showModal?Object(p.jsx)(v,{id:t.id,index:a,photo:t,rotateStyle:n,handleExpandClick:function(){return e.handleExpandClick(t)}},t.id):Object(p.jsx)(b,{id:t.id,index:a,photo:t,rotateStyle:n,handleExpandClick:function(){return e.handleExpandClick(t)},handleRotateClick:function(){return e.handleRotateClick(t)},handleDeleteClick:function(){return e.handleDeleteClick(a)},handleDraggableClick:function(){return e.toggleDraggable(t)}},t.id)}));return Object(p.jsxs)("div",{className:"App",children:[Object(p.jsxs)("div",{className:"header",children:[Object(p.jsx)("h1",{children:"Photo Gallery"}),Object(p.jsx)("section",{className:"head-section",children:Object(p.jsx)(u,{handleChange:this.debounceEvent(this.handleChange,1e3)})})]}),Object(p.jsx)(O.a,{dataLength:t.length,next:this.fetchImages,hasMore:this.state.more,loader:Object(p.jsx)(D,{}),children:this.state.searchField.length>0?Object(p.jsx)(A,{photos:t}):null})]})}}]),a}(n.Component),S=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,32)).then((function(t){var a=t.getCLS,n=t.getFID,o=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),n(e),o(e),c(e),i(e)}))};i.a.render(Object(p.jsx)(o.a.StrictMode,{children:Object(p.jsx)(k,{})}),document.getElementById("root")),S()}],[[31,1,2]]]);
//# sourceMappingURL=main.041e2faf.chunk.js.map